import{a as S}from"./chunk-U4UQDIAD.js";import{a as E}from"./chunk-TQQGZM52.js";import{a as q}from"./chunk-OPOM5NFT.js";import{a as y}from"./chunk-3MRJTI5X.js";import"./chunk-UAOFOE2L.js";import{$ as C,Ca as b,Da as h,Ea as d,I as F,N as g,Na as a,O as x,Oa as k,Pa as p,Ta as M,Ua as P,Vb as N,Y as T,Ya as j,Za as D,_ as r,ac as z,bc as G,ja as _,la as v,lb as V,mb as A,qb as $,ra as m,sa as w,ua as I,va as B,wa as o,xa as i,ya as u,yc as H,zc as L}from"./chunk-QKZGQOPL.js";import{e as O}from"./chunk-IGH4DTA6.js";var U=O(q());function J(t,l){if(t&1){let e=b();o(0,"button",15),h("click",function(){g(e);let n=d(2);return x(n.change_payed_state(!1))}),u(1,"i",16),i()}if(t&2){let e=d(2);v("disabled",e.reserva_selected==null||e.reserva_selected.timeout>e.fecha_actual)}}function K(t,l){if(t&1){let e=b();o(0,"button",17),h("click",function(){g(e);let n=d(2);return x(n.change_payed_state(!0))}),u(1,"i",16),i()}if(t&2){let e=d(2);v("disabled",e.reserva_selected==null||e.reserva_selected.timeout>e.fecha_actual)}}function Q(t,l){if(t&1&&_(0,J,2,1,"button",13)(1,K,2,1,"button",14),t&2){let e=d();m(e.reserva_selected.pago?0:-1),r(),m(e.reserva_selected.pago?-1:1)}}function X(t,l){t&1&&u(0,"i",19)}function Y(t,l){if(t&1&&u(0,"img",24),t&2){let e=d(3).$implicit;v("src","data:"+e.alojamiento.portada.type+";base64,"+e.alojamiento.portada.file_base64,T)}}function Z(t,l){if(t&1&&(o(0,"video",25),u(1,"source",26),i()),t&2){let e=d(3).$implicit;r(),v("src","data:"+e.alojamiento.portada.type+";base64,"+e.alojamiento.portada.file_base64,T)("type",e.alojamiento.portada.type)}}function ee(t,l){if(t&1&&_(0,Y,1,1,"img",24)(1,Z,2,2,"video",25),t&2){let e=d(2).$implicit;m(e.alojamiento.portada.type.startsWith("image")?0:-1),r(),m(e.alojamiento.portada.type.startsWith("image")?-1:1)}}function te(t,l){if(t&1&&(o(0,"div",6)(1,"div",23),_(2,ee,2,2),i(),o(3,"div",20)(4,"small")(5,"b"),a(6),i()()()()),t&2){let e=d().$implicit;r(2),m(e.alojamiento.portada?2:-1),r(4),k(e.alojamiento.nombre)}}function ie(t,l){if(t&1&&(o(0,"div",6)(1,"div",20)(2,"b"),a(3,"Cliente:"),i(),a(4),i(),o(5,"div",20)(6,"b"),a(7,"Identificaci\xF3n:"),i(),a(8),i(),o(9,"div",20)(10,"b"),a(11,"Tel\xE9fono:"),i(),a(12),i(),o(13,"div",20)(14,"b"),a(15,"e-mail:"),i(),a(16),i()()),t&2){let e=d().$implicit;r(4),p(" ",e.user.fullname," "),r(4),p(" ",e.user.identification," "),r(4),p(" ",e.user.phone_number," "),r(4),p(" ",e.user.email," ")}}function ne(t,l){t&1&&(o(0,"span",21),a(1,"Pagado"),i())}function oe(t,l){t&1&&(o(0,"span",22),a(1,"No Pagado"),i())}function ae(t,l){if(t&1){let e=b();o(0,"tr",18),h("click",function(){let n=g(e).$implicit,c=d();return x(c.reserva_selected=n)}),o(1,"td",10),_(2,X,1,0,"i",19),i(),o(3,"td"),_(4,te,7,2,"div",6),i(),o(5,"td")(6,"div",6)(7,"div",20)(8,"b"),a(9,"Entrada:"),i(),a(10),j(11,"date"),i(),o(12,"div",20)(13,"b"),a(14,"Salida:"),i(),a(15),j(16,"date"),i(),o(17,"div",20)(18,"b"),a(19,"Hu\xE9spedes:"),i(),a(20),i(),o(21,"div",20)(22,"b"),a(23,"Noches:"),i(),a(24),i()()(),o(25,"td"),_(26,ie,17,4,"div",6),i(),o(27,"td"),a(28),_(29,ne,2,0,"span",21)(30,oe,2,0,"span",22),i()()}if(t&2){let e=l.$implicit,s=d();r(2),m(s.reserva_selected==e?2:-1),r(2),m(e.alojamiento?4:-1),r(6),p(" ",D(11,10,e.fecha_in,"yyyy-MM-dd")," "),r(5),p(" ",D(16,13,e.fecha_out,"yyyy-MM-dd")," "),r(5),p(" ",e.huespedes," "),r(4),p(" ",e.noches," "),r(2),m(e.user?26:-1),r(2),p(" ",e.total,"\xA0 "),r(),m(e.pago?29:-1),r(),m(e.pago?-1:30)}}var W=(()=>{let l=class l{constructor(s,n,c){this.authService=s,this.catalogService=n,this.fileService=c,this.reserva_selected=null,this.reservas=[],this.fecha_actual=new Date().getTime()}get_reservations(){let s={client_id:!0,alojamiento_id:!0,pago:!0,total:!0,huespedes:!0,fecha_in:!0,fecha_out:!0,noches:!0,user:!0};this.reservas=[],this.catalogService.get_items("reservas",s).then(n=>{n.status==200&&(this.reservas=n.response,this.get_alojamientos())}).catch(n=>console.log(n))}change_payed_state(s){this.reserva_selected.pago=s,this.catalogService.update_item("reservas",this.reserva_selected.item_id,this.reserva_selected).then(n=>{this.refresh()}).catch(n=>console.log(n))}delete_reserva(){U.default.fire({title:"Confirmaci\xF3n de anulaci\xF3n de reserva",text:"Estas seguro de anular tu reserva?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar"}).then(s=>{s.value&&this.catalogService.delete_item("reservas",this.reserva_selected.item_id).then(n=>{this.refresh()}).catch(n=>console.log(n))})}get_alojamientos(){let s={nombre:!0,personas:!0,metros:!0,habitaciones:!0,banos:!0,zona:!0,desde_noche:!0,desde_mes:!0,descripcion:!0,ubication:!0,check_in:!0,check_out:!0,propietario:!0,galery:!0,condiciones:!0,servicios:!0,rate:!0,comentarios:!0,hide:!0};this.reservas.forEach(n=>{this.catalogService.get_item("alojamientos",n.alojamiento_id,s).then(c=>{n.alojamiento=c.response,n.alojamiento.images=[],n.alojamiento.galery&&n.alojamiento.galery.length>0&&n.alojamiento.galery.forEach(R=>{this.fileService.get_file("fotografias_alojamientos",R).then(f=>{n.alojamiento.images.push(f.response),f.response.favorite&&(n.alojamiento.portada=f.response)}).catch(f=>console.log(f))})}).catch(c=>console.log(c))})}refresh(){this.reservas=[],this.get_reservations()}ngOnInit(){this.refresh()}};l.\u0275fac=function(n){return new(n||l)(C(S),C(y),C(E))},l.\u0275cmp=F({type:l,selectors:[["app-reservas"]],standalone:!0,features:[M([y,E,S]),P],decls:24,vars:3,consts:[[1,"g-3","mb-2"],[3,"sm"],["aria-label","Toolbar with button groups","role","group"],["aria-label","Basic example","role","group",1,"me-2"],["cButton","","color","danger","title","Eliminar",3,"click","disabled"],[1,"fas","fa-trash"],[1,"row"],[1,"col-12",2,"max-height","75vh","overflow-y","auto"],[1,"table"],[2,"text-align","center"],[1,"col-1"],[1,"col-3"],[1,"col-2"],["cButton","","color","danger","title","Reserva No Pagada",3,"disabled"],["cButton","","color","success","title","Reserva Pagada",3,"disabled"],["cButton","","color","danger","title","Reserva No Pagada",3,"click","disabled"],[1,"fa-solid","fa-money-bill-1-wave"],["cButton","","color","success","title","Reserva Pagada",3,"click","disabled"],[2,"text-align","center",3,"click"],[1,"fa-regular","fa-hand-point-right"],[1,"col-12"],[1,"badge","text-bg-success"],[1,"badge","text-bg-danger"],[1,"col-12",2,"text-align","center"],[1,"w-25","h-auto","object-cover","rounded-lg",2,"display","inline",3,"src"],["controls","","autoplay","","muted","","loop","",1,"w-25","h-auto","object-cover","rounded-lg",2,"display","inline"],[3,"src","type"]],template:function(n,c){n&1&&(o(0,"c-row",0)(1,"c-col",1)(2,"c-button-toolbar",2)(3,"c-button-group",3)(4,"button",4),h("click",function(){return c.delete_reserva()}),u(5,"i",5),i(),_(6,Q,2,2),i()()()(),o(7,"div",6)(8,"div",7)(9,"table",8)(10,"thead")(11,"tr",9),u(12,"th",10),o(13,"th",11),a(14,"Alojamiento"),i(),o(15,"th",11),a(16,"Datos de Reserva"),i(),o(17,"th",11),a(18,"Datos del Cliente"),i(),o(19,"th",12),a(20,"Total"),i()()(),o(21,"tbody"),I(22,ae,31,16,"tr",9,w),i()()()()),n&2&&(r(),v("sm",7),r(3),v("disabled",c.reserva_selected==null||c.reserva_selected.pago==!0||c.reserva_selected.timein<c.fecha_actual),r(2),m(c.reserva_selected?6:-1),r(16),B(c.reservas))},dependencies:[$,A,V,N,H,L,z,G]});let t=l;return t})();var Le=[{path:"",component:W,data:{title:"Reservas"}}];export{Le as routes};
