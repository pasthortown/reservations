import{a as pe}from"./chunk-OPOM5NFT.js";import{a as S}from"./chunk-3MRJTI5X.js";import{a as re,b as le,f as ae,o as ce}from"./chunk-I4ZVMMCH.js";import"./chunk-UAOFOE2L.js";import{$ as D,Ca as y,Da as d,Ea as b,Gc as $,Hb as z,Hc as ee,I as k,Ic as te,Jc as ie,Kc as ne,Ma as I,N as m,Na as u,O as p,Oa as L,P as C,Pa as G,Q as f,Qa as M,Ra as V,Sa as P,Ta as H,Ua as W,Uc as oe,Vb as A,Wa as N,Wb as O,_ as i,ac as R,bc as j,ja as T,la as c,pa as F,qb as X,qc as q,ra as w,sa as B,sc as J,ua as E,uc as K,va as x,vc as Q,wa as n,wc as U,xa as o,ya as v,yc as Y,zc as Z}from"./chunk-QKZGQOPL.js";import{e as me}from"./chunk-IGH4DTA6.js";var se=me(pe());var de=r=>({row_selected:r});function ue(r,s){r&1&&(n(0,"h5",12),u(1,"Nuevo Precio"),o())}function _e(r,s){r&1&&(n(0,"h5",12),u(1,"Edici\xF3n de Precio"),o())}function ge(r,s){r&1&&v(0,"i",26)}function he(r,s){if(r&1&&u(0),r&2){let h=b().$index;G(" ",h+1," ")}}function ve(r,s){if(r&1){let h=y();n(0,"tr",24),d("click",function(){let a=m(h).$implicit,e=b();return p(e.price_selected=a)}),n(1,"th",25),T(2,ge,1,0,"i",26)(3,he,1,1),o(),n(4,"td"),u(5),o()()}if(r&2){let h=s.$implicit,t=b();F(N(5,de,t.price_selected==h)),i(2),w(t.price_selected==h?2:-1),i(),w(t.price_selected!==h?3:-1),i(2),L(h.name)}}var We=(()=>{let s=class s{constructor(t){this.catalogService=t,this.filter="",this.precios=[],this.precios_shown=[],this.price_selected={name:""},this.visible=!1,this.is_new=!1}ngOnInit(){this.get_catalog()}get_catalog(){this.precios=[],this.price_selected={name:""},this.catalogService.get_items("precios",{name:!0}).then(t=>{this.precios=t.response,this.filterData()}).catch(t=>console.log(t))}new_item(){this.price_selected={name:""},this.is_new=!0}filterData(){let t=this.filter.toLowerCase();this.precios_shown=this.precios.filter(a=>a.name.toLowerCase().includes(t))}cancelar(){this.visible=!this.visible,this.get_catalog()}handleChange(t){this.visible=t}save(){this.is_new?this.upload_item(this.price_selected,"precios"):this.update_item(this.price_selected,"precios"),this.visible=!this.visible}update_item(t,a){this.catalogService.update_item(a,t.item_id,t).then(e=>{this.get_catalog()}).catch(e=>console.log(e))}delete_item(t,a){se.default.fire({title:"Confirmaci\xF3n de Seguridad!",text:"Est\xE1 seguro de continuar con la eliminaci\xF3n del elemento?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, deseo borrarlo!"}).then(e=>{e.isConfirmed?this.catalogService.delete_item(a,t.item_id).then(l=>{this.get_catalog()}).catch(l=>console.log(l)):this.get_catalog()})}upload_item(t,a){this.catalogService.upload_items(a,[t]).then(e=>{this.get_catalog()}).catch(e=>console.log(e))}};s.\u0275fac=function(a){return new(a||s)(D(S))},s.\u0275cmp=k({type:s,selectors:[["app-precios"]],standalone:!0,features:[H([S]),W],decls:46,vars:23,consts:[["modalXl",""],[1,"g-3","mb-2"],[3,"sm"],["aria-label","Toolbar with button groups","role","group"],["aria-label","Basic example","role","group",1,"me-2"],["cButton","","color","primary","title","Nuevo",3,"click","cModalToggle"],["cIcon","","size","1xl",3,"name","title"],["cButton","","color","warning","title","Editar",3,"click","cModalToggle","disabled"],["cButton","","color","danger","title","Eliminar",3,"click","disabled"],["cInputGroupText",""],["cFormControl","","id","autoSizingInputGroup","placeholder","Buscar",3,"ngModelChange","keyup","ngModel"],["id","modalXl","size","xl",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],[1,"mb-3",3,"cFormFloating"],["cFormControl","","id","floatingInput","placeholder","Descripci\xF3n del Precio","type","text",3,"ngModelChange","ngModel"],["cLabel","","for","floatingInput"],["aria-label","Basic example","role","group",1,"m-auto"],["cButton","","color","primary","title","Guardar",3,"click"],["cButton","","color","danger","title","Cancelar",3,"click"],[1,"row",2,"max-height","75vh","overflow-y","auto"],["cTable","","hover",""],["scope","col"],[3,"class"],[3,"click"],["scope","row"],[1,"fa-regular","fa-hand-point-right"]],template:function(a,e){if(a&1){let l=y();n(0,"c-row",1)(1,"c-col",2)(2,"c-button-toolbar",3)(3,"c-button-group",4)(4,"button",5),d("click",function(){return m(l),p(e.new_item())}),C(),v(5,"svg",6),o(),f(),n(6,"button",7),d("click",function(){return m(l),p(e.is_new=!1)}),C(),v(7,"svg",6),o(),f(),n(8,"button",8),d("click",function(){return m(l),p(e.delete_item(e.price_selected,"precios"))}),C(),v(9,"svg",6),o()()()(),f(),n(10,"c-col",2)(11,"c-input-group")(12,"span",9),C(),v(13,"svg",6),o(),f(),n(14,"input",10),P("ngModelChange",function(g){return m(l),V(e.filter,g)||(e.filter=g),p(g)}),d("keyup",function(){return m(l),p(e.filterData())}),o()()()(),n(15,"c-modal",11,0),d("visibleChange",function(g){return m(l),p(e.handleChange(g))}),n(17,"c-modal-header"),T(18,ue,2,0,"h5",12)(19,_e,2,0,"h5",12),n(20,"button",13),d("click",function(){return m(l),p(e.cancelar())}),o()(),n(21,"c-modal-body")(22,"div",14)(23,"input",15),P("ngModelChange",function(g){return m(l),V(e.price_selected.name,g)||(e.price_selected.name=g),p(g)}),o(),n(24,"label",16),u(25,"Nombre"),o()(),n(26,"c-row",1)(27,"c-button-toolbar",3)(28,"c-button-group",17)(29,"button",18),d("click",function(){return m(l),p(e.save())}),C(),v(30,"svg",6),u(31," Guardar"),o(),f(),n(32,"button",19),d("click",function(){return m(l),p(e.cancelar())}),C(),v(33,"svg",6),u(34," Cancelar"),o()()()()()(),f(),n(35,"div",20)(36,"table",21)(37,"thead")(38,"tr")(39,"th",22),u(40,"#"),o(),n(41,"th",22),u(42,"Descripci\xF3n"),o()()(),n(43,"tbody"),E(44,ve,6,7,"tr",23,B),o()()()}if(a&2){let l=I(16);i(),c("sm",7),i(3),c("cModalToggle",l.id),i(),c("name","cilPlus")("title","cilPlus"),i(),c("cModalToggle",l.id)("disabled",e.price_selected.name==""),i(),c("name","cilPen")("title","cilPen"),i(),c("disabled",e.price_selected.name==""),i(),c("name","cilTrash")("title","cilTrash"),i(4),c("name","cilSearch")("title","cilSearch"),i(),M("ngModel",e.filter),i(),c("visible",e.visible),i(3),w(e.price_selected.name==""?18:-1),i(),w(e.price_selected.name!==""?19:-1),i(3),c("cFormFloating",!0),i(),M("ngModel",e.price_selected.name),i(7),c("name","cilSave")("title","cilSave"),i(3),c("name","cilX")("title","cilX"),i(11),x(e.precios_shown)}},dependencies:[Q,ce,re,le,ae,R,j,z,X,q,U,K,J,oe,O,A,Y,Z,ne,te,ie,$,ee],styles:[".row_selected[_ngcontent-%COMP%]{font-size:20px;font-weight:700}"]});let r=s;return r})();export{We as PreciosComponent};
