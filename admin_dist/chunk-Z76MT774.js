import{a as T}from"./chunk-BHOS5LT2.js";import"./chunk-UAOFOE2L.js";import{a as ce,b as de,f as me,n as ue}from"./chunk-WPXTPOO6.js";import{$ as V,$a as R,Ac as ee,Ca as k,Cc as te,Da as h,Dc as ie,Ea as b,I as E,Jb as z,Kc as ne,Lc as oe,Mc as re,N as m,Na as I,Nc as le,O as u,Oa as s,Oc as ae,P as C,Pa as w,Q as M,Qa as W,Sa as S,Ta as y,Ua as F,Va as P,Wa as G,Ya as N,Yb as O,Yc as se,Zb as j,_ as i,_a as A,dc as J,ec as K,ja as x,la as c,nb as H,ob as q,pa as L,ra as v,sa as U,sb as X,ua as B,uc as Q,va as D,wa as e,wc as Y,xa as t,ya as f,yc as Z,zc as $}from"./chunk-3WV2BAOI.js";import"./chunk-IGH4DTA6.js";var _e=o=>({row_selected:o});function ge(o,p){if(o&1){let l=k();e(0,"button",34),h("click",function(){m(l);let d=b(2);return u(d.change_lock_state())}),C(),f(1,"svg",6),t()}if(o&2){let l=b(2);c("disabled",l.user_selected.fullname==""),i(),c("name","cilLockLocked")("title","cilLockLocked")}}function he(o,p){if(o&1){let l=k();e(0,"button",35),h("click",function(){m(l);let d=b(2);return u(d.change_lock_state())}),C(),f(1,"svg",6),t()}if(o&2){let l=b(2);c("disabled",l.user_selected.fullname==""),i(),c("name","cilLockUnlocked")("title","cilLockUnlocked")}}function fe(o,p){if(o&1&&x(0,ge,2,3,"button",32)(1,he,2,3,"button",33),o&2){let l=b();v(l.user_selected.disabled?-1:0),i(),v(l.user_selected.disabled?1:-1)}}function Ce(o,p){o&1&&f(0,"i",38)}function be(o,p){if(o&1&&s(0),o&2){let l=b().$index;W(" ",l+1," ")}}function ve(o,p){o&1&&(C(),f(0,"svg",6)),o&2&&c("name","cilLockLocked")("title","cilLockLocked")}function we(o,p){o&1&&(C(),f(0,"svg",6)),o&2&&c("name","cilLockUnlocked")("title","cilLockLocked")}function Se(o,p){if(o&1){let l=k();e(0,"tr",36),h("click",function(){let d=m(l).$implicit,n=b();return u(n.user_selected=d)}),e(1,"th",37),x(2,Ce,1,0,"i",38)(3,be,1,1),t(),e(4,"td",37),s(5),t(),e(6,"td",37),s(7),t(),e(8,"td",37),s(9),t(),e(10,"td",37),s(11),t(),e(12,"td",37),s(13),t(),e(14,"td",37),s(15),t(),e(16,"td",37),x(17,ve,1,2,":svg:svg",6)(18,we,1,2,":svg:svg",6),t()()}if(o&2){let l=p.$implicit,a=b();L(N(12,_e,a.user_selected==l)),i(2),v(a.user_selected==l?2:-1),i(),v(a.user_selected!==l?3:-1),i(2),w(l.fullname),i(2),w(l.identification),i(2),w(l.phone_number),i(2),w(l.borndate),i(2),w(l.email),i(2),w(l.rol),i(2),v(l.disabled?17:-1),i(),v(l.disabled?-1:18)}}var pe=(()=>{let p=class p{constructor(a){this.authService=a,this.filter="",this.users=[],this.users_shown=[],this.user_selected={item_id:"",fullname:"",identification:"",phone_number:"",borndate:"",email:"",rol:"",login_tries:"",active:"",disabled:""},this.visible=!1,this.is_new=!1}ngOnInit(){this.get_users()}get_users(){this.users=[],this.user_selected={item_id:"",fullname:"",identification:"",phone_number:"",borndate:"",email:"",rol:"",login_tries:"",active:"",disabled:""};let a={fullname:!0,identification:!0,phone_number:!0,borndate:!0,email:!0,rol:!0,login_tries:!0,active:!0,disabled:!0};this.authService.get_users(a).then(d=>{this.users=d.response,this.filterData()}).catch(d=>console.log(d))}new_item(){this.user_selected={item_id:"",fullname:"",identification:"",phone_number:"",borndate:"",email:"",rol:"",login_tries:"",active:"",disabled:""},this.is_new=!0}filterData(){let a=this.filter.toLowerCase();this.users_shown=this.users.filter(d=>Object.values(d).some(n=>n.toString().toLowerCase().includes(a)))}cancelar(){this.visible=!this.visible,this.get_users()}handleChange(a){this.visible=a}edit_user_data(){this.update_item(this.user_selected),this.visible=!this.visible}update_item(a){this.authService.update_user_data(a.item_id,a).then(d=>{this.get_users()}).catch(d=>console.log(d))}change_lock_state(){this.user_selected.disabled&&this.authService.unlock_user(this.user_selected.item_id).then(a=>{this.get_users()}).catch(a=>console.log(a)),this.user_selected.disabled||this.authService.lock_user(this.user_selected.item_id).then(a=>{this.get_users()}).catch(a=>console.log(a))}};p.\u0275fac=function(d){return new(d||p)(V(T))},p.\u0275cmp=E({type:p,selectors:[["app-users"]],standalone:!0,features:[P([T]),G],decls:76,vars:30,consts:[["modalXl",""],[1,"g-3","mb-2"],[3,"sm"],["aria-label","Toolbar with button groups","role","group"],["aria-label","Basic example","role","group",1,"me-2"],["cButton","","color","warning","title","Editar",3,"click","cModalToggle","disabled"],["cIcon","","size","1xl",3,"name","title"],["cInputGroupText",""],["cFormControl","","id","autoSizingInputGroup","placeholder","Buscar",3,"ngModelChange","keyup","ngModel"],["id","modalXl","size","xl",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],[1,"mb-3",3,"cFormFloating"],["cFormControl","","id","floatingFullname","placeholder","Nombre Completo","type","text",3,"ngModelChange","ngModel"],["cLabel","","for","floatingFullname"],["cFormControl","","id","floatingIdentification","placeholder","Identificaci\xF3n","type","text",3,"ngModelChange","ngModel"],["cLabel","","for","floatingIdentification"],["cFormControl","","id","floatingPhoneNumber","placeholder","N\xFAmero Telef\xF3nico","type","text",3,"ngModelChange","ngModel"],["cLabel","","for","floatingPhoneNumber"],["cFormControl","","id","floatingBorndate","placeholder","Fecha de Nacimiento","type","date",3,"ngModelChange","ngModel"],["cLabel","","for","floatingBorndate"],["cFormControl","","id","floatingEmail","placeholder","Correo Electr\xF3nico","type","email",3,"ngModelChange","ngModel"],["cLabel","","for","floatingEmail"],["cFormControl","","id","floatingRol","placeholder","Rol","type","text",3,"ngModelChange","ngModel"],["cLabel","","for","floatingRol"],["aria-label","Basic example","role","group",1,"m-auto"],["cButton","","color","primary","title","Guardar",3,"click"],["cButton","","color","danger","title","Cancelar",3,"click"],[1,"row",2,"max-height","75vh","overflow-y","auto"],["cTable","","hover",""],["scope","col"],[3,"class"],["cButton","","color","danger","title","Bloquear",3,"disabled"],["cButton","","color","danger","title","Desbloquear",3,"disabled"],["cButton","","color","danger","title","Bloquear",3,"click","disabled"],["cButton","","color","danger","title","Desbloquear",3,"click","disabled"],[3,"click"],["scope","row"],[1,"fa-regular","fa-hand-point-right"]],template:function(d,n){if(d&1){let _=k();e(0,"c-row",1)(1,"c-col",2)(2,"c-button-toolbar",3)(3,"c-button-group",4)(4,"button",5),h("click",function(){return m(_),u(n.is_new=!1)}),C(),f(5,"svg",6),t(),x(6,fe,2,2),t()()(),M(),e(7,"c-col",2)(8,"c-input-group")(9,"span",7),C(),f(10,"svg",6),t(),M(),e(11,"input",8),F("ngModelChange",function(r){return m(_),y(n.filter,r)||(n.filter=r),u(r)}),h("keyup",function(){return m(_),u(n.filterData())}),t()()()(),e(12,"c-modal",9,0),h("visibleChange",function(r){return m(_),u(n.handleChange(r))}),e(14,"c-modal-header")(15,"h5",10),s(16),t(),e(17,"button",11),h("click",function(){return m(_),u(n.cancelar())}),t()(),e(18,"c-modal-body")(19,"div",12)(20,"input",13),F("ngModelChange",function(r){return m(_),y(n.user_selected.fullname,r)||(n.user_selected.fullname=r),u(r)}),t(),e(21,"label",14),s(22,"Nombre Completo"),t()(),e(23,"div",12)(24,"input",15),F("ngModelChange",function(r){return m(_),y(n.user_selected.identification,r)||(n.user_selected.identification=r),u(r)}),t(),e(25,"label",16),s(26,"Identificaci\xF3n"),t()(),e(27,"div",12)(28,"input",17),F("ngModelChange",function(r){return m(_),y(n.user_selected.phone_number,r)||(n.user_selected.phone_number=r),u(r)}),t(),e(29,"label",18),s(30,"N\xFAmero Telef\xF3nico"),t()(),e(31,"div",12)(32,"input",19),A(33,"date"),h("ngModelChange",function(r){return m(_),u(n.user_selected.borndate=r)}),t(),e(34,"label",20),s(35,"Fecha de Nacimiento"),t()(),e(36,"div",12)(37,"input",21),F("ngModelChange",function(r){return m(_),y(n.user_selected.email,r)||(n.user_selected.email=r),u(r)}),t(),e(38,"label",22),s(39,"Correo Electr\xF3nico"),t()(),e(40,"div",12)(41,"input",23),F("ngModelChange",function(r){return m(_),y(n.user_selected.rol,r)||(n.user_selected.rol=r),u(r)}),t(),e(42,"label",24),s(43,"Rol"),t()(),e(44,"c-row",1)(45,"c-button-toolbar",3)(46,"c-button-group",25)(47,"button",26),h("click",function(){return m(_),u(n.edit_user_data())}),C(),f(48,"svg",6),s(49," Guardar "),t(),M(),e(50,"button",27),h("click",function(){return m(_),u(n.cancelar())}),C(),f(51,"svg",6),s(52," Cancelar "),t()()()()()(),M(),e(53,"div",28)(54,"table",29)(55,"thead")(56,"tr")(57,"th",30),s(58,"#"),t(),e(59,"th",30),s(60,"Nombre Completo"),t(),e(61,"th",30),s(62,"Identificaci\xF3n"),t(),e(63,"th",30),s(64,"N\xFAmero Telef\xF3nico"),t(),e(65,"th",30),s(66,"Fecha de Nacimiento"),t(),e(67,"th",30),s(68,"Correo Electr\xF3nico"),t(),e(69,"th",30),s(70,"Rol"),t(),e(71,"th",30),s(72,"Bloqueo"),t()()(),e(73,"tbody"),B(74,Se,19,14,"tr",31,U),t()()()}if(d&2){let _=I(13);i(),c("sm",7),i(3),c("cModalToggle",_.id)("disabled",n.user_selected.fullname==""),i(),c("name","cilPen")("title","cilPen"),i(),v(n.user_selected.fullname!==""?6:-1),i(4),c("name","cilSearch")("title","cilSearch"),i(),S("ngModel",n.filter),i(),c("visible",n.visible),i(4),w(n.user_selected.fullname?"Edici\xF3n de Usuario":"Nuevo Usuario"),i(3),c("cFormFloating",!0),i(),S("ngModel",n.user_selected.fullname),i(3),c("cFormFloating",!0),i(),S("ngModel",n.user_selected.identification),i(3),c("cFormFloating",!0),i(),S("ngModel",n.user_selected.phone_number),i(3),c("cFormFloating",!0),i(),c("ngModel",R(33,27,n.user_selected.borndate,"y-MM-dd")),i(4),c("cFormFloating",!0),i(),S("ngModel",n.user_selected.email),i(3),c("cFormFloating",!0),i(),S("ngModel",n.user_selected.rol),i(7),c("name","cilSave")("title","cilSave"),i(3),c("name","cilX")("title","cilX"),i(23),D(n.users_shown)}},dependencies:[q,H,$,ue,ce,de,me,J,K,z,X,Q,ee,Z,Y,se,j,O,te,ie,ae,re,le,ne,oe],styles:[".row_selected[_ngcontent-%COMP%]{font-size:20px;font-weight:700}"]});let o=p;return o})();var je=[{path:"",component:pe,data:{title:"Usuarios"}}];export{je as routes};
